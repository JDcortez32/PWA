<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover">
    <title>PWA</title>
    <meta name="theme-color" content="#c634d9">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon-180.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-styles" content="black-translucent">
    <meta name="description" content="PWA (Camara y Microfono)">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Media PWA</h1>
        <button id="btnInstall" hidden>Instalar</button>
    </header>
    <main>
        <section class="card">
            <h2>C谩mara</h2>
            <div class="controls">
                <select id="videoDevices"></select>
                <button id="btnStartCam">Iniciar</button>
                <button id="btnStopCam">Detener</button>
                <button id="btnFlip" title="Cambiar c谩mara" disabled>Invertir</button>
                <button id="btnTorch" title="Linterna" disabled>Linterna</button>
                <button id="btnShot" disabled>Foto</button>
            </div>
            <div class="media">
                <video id="video" autoplay playsinline></video>
                <canvas id="canvas" class="hidden"></canvas>
            </div>
            <div id="photos" class="gallery"></div>
        </section>

        <section class="card">
            <h2>Grabaci贸n de Audio <span id="audioCount">(0)</span></h2>
            <div class="controls">
                <button id="btnStartRec"> Grabar</button>
                <button id="btnStopRec" disabled>癸 Detener</button>
                <span id="recStatus" aria-live="polite">Listo</span>
            </div>
            
            <!-- NUEVO: Contenedor para audios guardados -->
            <div id="audioContainer" class="audio-container">
                <h3> Audios Guardados</h3>
                <div id="audios" class="audio-list">
                    <!-- Los audios se mostrar谩n aqu铆 -->
                </div>
            </div>
        </section>

        <section class="card">
            <h2>Vibraci贸n</h2>
            <div class="controls">
                <button id="btnVibrar"> Vibrar</button>
            </div>
        </section>

        <section class="card">
            <h2>Tono de llamada</h2>
            <div class="controls">
                <button id="btnRingtone"> Reproducir tono</button>
            </div>
        </section>

        <section class="card">
            <h2>Compatibilidad y permisos</h2>
            <ul>
                <li>Requiere HTTPS y permisos del usuario.</li>
                <li>iOS restringe m谩s que Android y si una funci贸n no aparece es limitaci贸n del navegador.</li>
                <li>Offline, la app carga sin red, captura en vivo requiere conexi贸n con el hardware en ese momento.</li>
            </ul>
            <details>
                <summary>Prueba r谩pida sin permisos persistentes.</summary>
                <input type="file" accept="image/*,captura=camera,video/*;capture=camera,audio/*">
            </details>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Media PWA</p>
    </footer>

    <script src="app.js" type="module"></script>
</body>
</html>